<div class="client-container">
    @if (loading()) {
    <mat-spinner></mat-spinner>
    } @else {
    @if (error()) {
    <div class="error">
        <p>Error loading client: {{ error()?.message || error() }}</p>
    </div>
    } @else {
    @if (client(); as client) {
    <mat-card class="client-information-container">
        <mat-card-header>
            <div mat-card-avatar class="client-card-header-avatar">
                {{ client.firstName[0] }}{{ client.lastName[0] }}
            </div>
            <mat-card-title>{{ client.firstName }} {{ client.lastName }}</mat-card-title>
            <mat-card-subtitle>Client information</mat-card-subtitle>
        </mat-card-header>

        <mat-divider class="divider"></mat-divider>

        <mat-card-content class="client-card-content-container">
            <div class="client-card-content-row">
                <p class="client-data-label">First Name</p>
                @if(isReadOnly()) {
                <p class="client-data-label">{{client.firstName}}</p>
                }
                @else {
                <mat-form-field appearance="fill" class="client-card-content-form">
                    <input matInput [value]="client.firstName" class="client-data" readonly="{{isReadOnly()}}" />
                </mat-form-field>
                }
            </div>

            <div class="client-card-content-row">
                <p class="client-data-label">Last Name</p>
                @if(isReadOnly()) {
                <p class="client-data-label">{{client.lastName}}</p>
                }
                @else {
                <mat-form-field appearance="fill">
                    <input matInput [value]="client.lastName" class="client-data" readonly="{{isReadOnly()}}" />
                </mat-form-field>
                }
            </div>

            <div class="client-card-content-row">
                <p class="client-data-label">Bank Account Number</p>
                @if(isReadOnly()) {
                <p class="client-data-label">{{client.bankAccountNumber}}</p>
                }
                @else {
                <mat-form-field appearance="fill">
                    <input matInput [value]="client.bankAccountNumber" class="client-data"
                        readonly="{{isReadOnly()}}" />
                </mat-form-field>
                }
            </div>

        </mat-card-content>

        <mat-card-actions align="end">
            <button matButton="elevated" class="pill-button" mat-flat-button color="primary"
                (click)="openDebtDialog()">Get Loan ðŸ’° </button>
            @if(isReadOnly()) {
            <button matButton="elevated" class="pill-button" mat-flat-button color="primary"
                (click)="changeReadOnlyStatus()">Edit</button>
            } @else{
            <button matButton="elevated" class="pill-button button-save" mat-flat-button color="primary"
                (click)="changeReadOnlyStatus()">Save</button>
            }
        </mat-card-actions>
    </mat-card>

    @if(client?.debts)
    {
    <app-client-debt-component [debts]="client.debts"></app-client-debt-component>
    }

    } @else {
    <p>Loading clientâ€¦</p>
    }}}
</div>